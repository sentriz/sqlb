env GOPACKAGE=models
env GOFILE=models.go
exec sqlb -to event.gen.go Event

cmp event.gen.exp.go event.gen.go

-- models.go --
package models

// Event has no primary key - user handles insert/update logic manually
type Event struct {
	Timestamp int64
	Type      string
	Data      string
}

-- event.gen.exp.go --
// Code generated by "sqlb -to event.gen.go Event"; DO NOT EDIT.

package models

import (
	"database/sql"
	"fmt"
)

func _() {
	// Validate the struct fields haven't changed. If this doesn't compile you probably need to `go generate` again.
	var e Event
	_ = Event{e.Timestamp, e.Type, e.Data}
}

func (Event) IsGenerated(c string) bool {
	return false
}

func (e Event) Values() []sql.NamedArg {
	return []sql.NamedArg{sql.Named("timestamp", e.Timestamp), sql.Named("type", e.Type), sql.Named("data", e.Data)}
}

func (e *Event) ScanFrom(rows *sql.Rows) error {
	columns, err := rows.Columns()
	if err != nil {
		return err
	}
	dests := make([]any, 0, len(columns))
	for _, c := range columns {
		switch c {
		case "timestamp":
			dests = append(dests, &e.Timestamp)
		case "type":
			dests = append(dests, &e.Type)
		case "data":
			dests = append(dests, &e.Data)
		default:
			return fmt.Errorf("unknown column name %q", c)
		}
	}
	return rows.Scan(dests...)
}
